{% extends "base.html" %}
{% load i18n static bootstrap3 ecobasa_registration %}

{% block page_title %}
  {% if object %}
    {% blocktrans with group_name=object.name %}Edit group “{{ group_name }}”{% endblocktrans %}
  {% else %}
    {% trans "Create Group" %}
  {% endif %}
{% endblock %}

{% block extrahead %}
{{ block.super }}
{{ form.media.css }}
<link href="{% static "css/vendor/select2-bootstrap.css" %}" rel="stylesheet"/>
<link href="{% static "css/vendor/select2.css" %}" rel="stylesheet"/>
{% endblock extrahead %}

{% block content_title %}
  {% if object %}
    {% blocktrans with group_name=object.name %}Edit group “{{ group_name }}”{% endblocktrans %}
  {% else %}
    {% trans "Create Group" %}
  {% endif %}
{% endblock content_title %}

{% block content %}
{% with form.register_as.value as register_as %}
<form id="form-register-community" action="." method="post" enctype="multipart/form-data" novalidate="novalidate">
{% csrf_token %}
{{ form.register_as }}

<div id="navbar-community" class="{% ifequal register_as 'community' %}{% if form.errors %}show{% endif %}{% else %}hide{% endifequal %}">
  <nav class="navbar navbar-default registration" role="navigation">
    <ul class="nav navbar-nav">
        <li class="active"><a href="#slide-community-contact">{% trans "contact info" %}</a></li>
        <li><a href="#slide-community-visitors">{% trans "visitors" %}</a></li>
        <li><a href="#slide-community-wishlist">{% trans "wishlist" %}</a></li>
        <li><a href="#slide-community-offers">{% trans "offers" %}</a></li>
        <li><a href="#slide-community-basic">{% trans "basic info" %}</a></li>
    </ul>
  </nav>
</div>

<div id="slide-community-contact" class="slide {% ifequal register_as 'community' %}{% if form.errors %}show{% endif %}{% else %}hide{% endifequal %}">
  <div class="row">
    <div class="col-xs-12">
      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.username.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.username show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.first_name.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.first_name show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.last_name.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.last_name show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.email.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.email show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.password.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.password show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.password_repeat.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.password_repeat show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.contact_telephone.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.contact_telephone show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.name.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.name show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.contact_street.label %}</div>
        <div class="col-xs-9">{% bootstrap_field form.contact_street show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.contact_zipcode.label %}</div>
        <div class="col-xs-3">{% bootstrap_field form.contact_zipcode show_label=False %}</div>
        <div class="col-xs-2">{% bootstrap_label form.contact_city.label %}</div>
        <div class="col-xs-4">{% bootstrap_field form.contact_city show_label=False %}</div>
      </div>

      <div class="row">
        <div class="col-xs-3">{% bootstrap_label form.contact_country.label %}</div>
        <div class="col-xs-5">{% bootstrap_field form.contact_country show_label=False %}</div>
        <div class="col-xs-4">{% bootstrap_field form.contact_show %}</div>
      </div>
    </div>
  </div>

  <div class="row proceed">
    <div class="col-xs-6"><a href="#slide-register-as"><span class="glyphicon glyphicon-chevron-left"></span></a></div>
    <div class="col-xs-6"><a class="pull-right" href="#slide-community-visitors"><span class="glyphicon glyphicon-chevron-right"></span></a></div>
  </div>
</div>


<div id="slide-community-visitors" class="slide hide">
  <div class="row">
    <div class="col-xs-9">{% bootstrap_label form.visitors_num.label %}</div>
    <div class="col-xs-3">{% bootstrap_field form.visitors_num show_label=False %}</div>
  </div>

  {% bootstrap_field form.visitors_accommodation %}

  <div class="row proceed">
    <div class="col-xs-6"><a href="#slide-community-contact"><span class="glyphicon glyphicon-chevron-left"></span></a></div>
    <div class="col-xs-6"><a class="pull-right" href="#slide-community-wishlist"><span class="glyphicon glyphicon-chevron-right"></span></a></div>
  </div>
</div>


<div id="slide-community-wishlist" class="slide hide">
  {% bootstrap_field form.wishlist_materials %}
  {% bootstrap_field form.wishlist_tools %}<br />


  <div class="row">
    <div class="col-xs-9">{% bootstrap_field form.wishlist_seeds_kind %}</div>
    <div class="col-xs-3">{% bootstrap_field form.wishlist_seeds_num %}</div>
  </div>

  {% bootstrap_field form.wishlist_special_needs %}

  <div class="row proceed">
    <div class="col-xs-6"><a href="#slide-community-visitors"><span class="glyphicon glyphicon-chevron-left"></span></a></div>
    <div class="col-xs-6"><a class="pull-right" href="#slide-community-offers"><span class="glyphicon glyphicon-chevron-right"></span></a></div>
  </div>
</div>


<div id="slide-community-offers" class="slide hide">
  {% bootstrap_field form.offers_services %}
  {% bootstrap_field form.offers_skills %}
  {% bootstrap_field form.offers_creations %}

  {% bootstrap_field form.offers_workshop_spaces %}
  {% bootstrap_field form.offers_learning_seminars %}

  <div class="row proceed">
    <div class="col-xs-6"><a href="#slide-community-wishlist"><span class="glyphicon glyphicon-chevron-left"></span></a></div>
    <div class="col-xs-6"><a class="pull-right" href="#slide-community-basic"><span class="glyphicon glyphicon-chevron-right"></span></a></div>
  </div>
</div>


<div id="slide-community-basic" class="slide hide">
  <div class="row">
    <div class="col-xs-9">{% bootstrap_label form.basic_inhabitants.label %}</div>
    <div class="col-xs-3">{% bootstrap_field form.basic_inhabitants show_label=False %}</div>
  </div>

  <div class="row">
    <div class="col-xs-9">{% bootstrap_label form.basic_inhabitants_underage.label %}</div>
    <div class="col-xs-3">{% bootstrap_field form.basic_inhabitants_underage show_label=False %}</div>
  </div>

  {% bootstrap_field form.basic_brings_together %}

  <div class="row">
    <div class="col-xs-9">{% bootstrap_label form.basic_membership_status.label %}</div>
    <div class="col-xs-3">{% bootstrap_field form.basic_membership_status show_label=False %}</div>
  </div>
  <div class="row">
    {% bootstrap_field form.ecobasa_member  %}
  </div>

  <div class="register">
    {% trans "Register" as submit_label %}
    {% trans "Cancel" as reset_label %}
    {% url 'community-list' as reset_link %}
    {% buttons submit=submit_label reset=reset_label reset_link=reset_link layout='horizontal' %}{% endbuttons %}
  </div>

  <div class="row proceed">
    <div class="col-xs-6"><a href="#slide-community-offers"><span class="glyphicon glyphicon-chevron-left"></span></a></div>
  </div>

</div>

</form>
{% endwith %}
{% endblock content %}

{% block extrafooter %}
{{ block.super }}
{{ form.media.js }}
{% get_interests as interests %}
{% get_products as products %}
{% get_skills as skills %}
{% get_offers_services as offers_services %}
{% get_offers_skills as offers_skills %}
{% get_offers_creations as offers_creations %}
<script src="{% static 'js/vendor/select2/select2.min.js' %}"></script>
<script src="{% static 'js/ecobasa_register.js' %}"></script>
<script type="text/javascript">
$(function() {
  $('#id_contact_country').select2({
    placeholder: "Select a Country",
    allowClear: true
  });
  $("#id_offers_services").select2({
  tags:[{% for tag in offers_services %}"{{ tag }}"{% if not forloop.last %}, {% endif %}{% endfor %}],
  tokenSeparators: [",", " "]
  });
  $("#id_offers_skills").select2({
  tags:[{% for tag in offers_skills %}"{{ tag }}"{% if not forloop.last %}, {% endif %}{% endfor %}],
  tokenSeparators: [",", " "]
  });
  $("#id_offers_creations").select2({
  tags:[{% for tag in offers_creations %}"{{ tag }}"{% if not forloop.last %}, {% endif %}{% endfor %}],
  tokenSeparators: [",", " "]
  });
});
</script>
{% endblock extrafooter %}
