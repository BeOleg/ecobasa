{% extends "cosinnus/base.html" %}
{% load i18n thumbnail %}

{% block page_title %}
  {% blocktrans with username=profile.get_name %}User profile: {{ username }}{% endblocktrans %}
{% endblock %}

{% block body %}profile{% endblock body %}

{% block content %}
{% if user.is_superuser or user.is_user %}<a class="btn btn-primary pull-right" href="{% url 'cosinnus:profile-edit' %}">{% trans "Edit" %}</a>{% endif %}
<h1>{{ user.username }} - {% trans "a gift-economy pioneer" %}</h1>

{% with object.cosinnus_profile as profile %}
<div class="row">
  <div class="col-xs-3">
      {% if profile.avatar %}<img src="{% thumbnail profile.avatar "200x0" crop=1 upscale=1 %}" />{% endif %}
      <a class="btn btn-smll" href="mailto:{{ profile.email }}"></a>
  </div>
  <div class="col-xs-6">
    <h2>{% trans "Skills" %}</h2>
    <ul>
      {% for tag in profile.skills.all %}
      <li>{{ tag }}</li>
      {% if not forloop.last %} {% endif %}{% endfor %}
    </ul>
    <h2>{% trans "Interests" %}</h2>
    <ul>
      {% for tag in profile.interests.all %}
        <li>{{ tag }}</li>
      {% if not forloop.last %} {% endif %}{% endfor %}
    </ul>
    <h2>{% trans "Products" %}</h2>
    <ul>
      {% for tag in profile.products.all %}
      <li>{{ tag }}</li>
      {% if not forloop.last %} {% endif %}{% endfor %}
    </ul>
  </div>
  <div class="col-xs-3">
    <div class="row">
      <div class="col-xs-4">
        <span class="desc">{% trans "gender" %}</span>
      </div>
      <div class="col-xs-8">
        {{ profile.get_gender_display }}
      </div>
    </div>
    <div class="row">
      <div class="col-xs-4">
        <span class="desc">{% trans "birth date" %}</span>
      </div>
      <div class="col-xs-8">
        {{ profile.birth_date }}
      </div>
    </div>
    <div class="row">
      <div class="col-xs-4">
        <span class="desc">{% trans "country" %}</span>
      </div>
      <div class="col-xs-8">
        {{ profile.get_country_display }}
      </div>
    </div>
    <div class="row">
      <div class="col-xs-4">
        <span class="desc">{% trans "city" %}</span>
      </div>
      <div class="col-xs-8">
        {{ profile.zipcode }} {{ profile.city }}
      </div>
    </div>
  </div>
</div>
<div class="row">
  {% if profile.has_bus %}
  <h2>{% trans "Bus" %}</h2>
  <div class="col-xs-3">
    {% if profile.bus_image %}<img src="{% thumbnail profile.bus_image "200x0" crop=1 upscale=1 %}" />{% endif %}
  </div>
  <div class="col-xs-6">
    <div class="row">
      {% if  profile.bus_has_driving_license = "False" %}
        <span class="important">This bus still needs a driver!</span>
      {% endif %}
      {% if profile.bus_others_can_drive = "True" %}
        <p>Other people can drive this bus too</p>
      {% else %}
        <p>This bus needs to be driven by {{  user.username }} only</p>
      {% endif %}
    </div>
    <div class="row">
      <span class="desc">{% trans "Maximum passengers this bus can take:" %}</span>{{ profile.bus_num_passengers }}
    </div>
    <div class="row">
      <span class="desc">{% trans "fuel consumption" %}</span> {{ profile.bus_consumption }}l/100km
    </div>
    {% endif %}
  </div>
</div>

{% endwith %}
{% endblock content %}
